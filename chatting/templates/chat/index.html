{% extends 'base.html' %}

{% block base_content %}
    <div class="row-fluid">
        <div class="col-md-4">
            <h4>What chat room would you like to enter?</h4>
            <div class="form-group">
                <label for="room-name-input">Room Name</label>
                <input type="text" class="form-control focus" id="room-name-input" placeholder="Room Name">
            </div>
            <button class="btn btn-info" id="room-name-submit"> Enter</button>
        </div>
    </div>
{% endblock %}

{% block base_script %}
    <script>
        document.querySelector('#room-name-input').focus();
        document.querySelector('#room-name-input').onkeyup = function (e) {
            if (e.keyCode === 13) {
                document.querySelector('#room-name-submit').click();
            }
        };
        document.querySelector('#room-name-submit').onclick = function (e) {
            var roomName = document.querySelector('#room-name-input').value;
            if (roomName === '') {
                toastr.options = {
                    closeButton: false,
                    debug: false,
                    progressBar: true,
                    positionClass: "toast-top-center",
                    onclick: null,
                    showDuration: "300",
                    hideDuration: "1000",
                    timeOut: "1500",
                    extendedTimeOut: "1000",
                    showEasing: "swing",
                    hideEasing: "linear",
                    showMethod: "fadeIn",
                    hideMethod: "fadeOut"
                };
                toastr["info"]("you are not input room name.");
                return false;
            }
            window.location.pathname = '{{ frontUrl }}' + roomName + '/';
        };
    </script>
{% endblock %}
